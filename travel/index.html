<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>G331é˜¿å°”å±±è‡ªé©¾æ¸¸</title>
    <script src="https://webapi.amap.com/maps?v=2.0&key=98a9b1aede875554fc1957f1026b327a"></script>
    <style>
        :root {
            --theme-bg: #f8f9fa;
            --theme-card-bg: #ffffff;
            --theme-text-primary: #212529;
            --theme-text-secondary: #6c757d;
            --theme-accent: #007bff;
            --theme-header: linear-gradient(135deg, #667eea, #764ba2);
            --day1-color: #ff6b6b; --day2-color: #fca311; --day3-color: #fdec51; 
            --day4-color: #4caf50; --day5-color: #2196f3; --day6-color: #3f51b5; --day7-color: #9c27b0;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; }
        body { background-color: var(--theme-bg); color: var(--theme-text-primary); line-height: 1.6; }
        .container { max-width: 1200px; margin: 0 auto; padding: 20px; }
        header {
            text-align: center; margin-bottom: 30px; padding: 30px 20px;
            background: var(--theme-header); color: white;
            border-radius: 12px; box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
        }
        header h1 { font-size: 2.6rem; margin-bottom: 10px; }
        header p { font-size: 1.2rem; opacity: 0.9; }
        .map-section, .day-container {
            background-color: var(--theme-card-bg); padding: 25px; border-radius: 12px;
            margin-bottom: 30px; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.06);
            border: 1px solid #dee2e6;
        }
        .section-title { font-size: 1.6rem; margin-bottom: 20px; color: var(--theme-accent); border-bottom: 1px solid #e9ecef; padding-bottom: 15px; }
        .map-layout-wrapper { display: flex; gap: 25px; }
        .map-sidebar {
            flex: 0 0 240px; display: flex; flex-direction: column; justify-content: center;
            align-items: center; gap: 20px; background-color: #f8f9fa; border-radius: 10px; padding: 20px;
        }
        .map-container-wrapper { flex: 1; position: relative; }
        .map-container { width: 100%; min-height: 550px; border-radius: 10px; overflow: hidden; }
        .map-legend {
            position: absolute; bottom: 10px; left: 10px; background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(4px); padding: 10px; border-radius: 8px; z-index: 1000; 
            box-shadow: 0 2px 8px rgba(0,0,0,0.15); font-size: 12px;
        }
        .legend-title { font-weight: bold; margin-bottom: 8px; font-size: 13px; color: var(--theme-accent); }
        .legend-item { display: flex; align-items: center; margin-bottom: 6px; }
        .legend-color { width: 16px; height: 16px; border-radius: 4px; margin-right: 8px; }
        .action-group { display: flex; flex-direction: column; align-items: center; width: 100%; }
        .action-label { margin-top: 8px; font-size: 0.8rem; color: var(--theme-text-secondary); text-align: center;}
        .map-btn-primary {
            display: flex; align-items: center; justify-content: center; gap: 10px; 
            background: var(--theme-accent); color: white; padding: 12px 20px;
            border-radius: 8px; text-decoration: none; font-weight: bold; font-size: 1rem;
            transition: opacity 0.2s; text-align: center; width: 100%;
        }
        .map-btn-primary:hover { opacity: 0.85; }
        .qr-code-container { margin-top: 15px; padding: 8px; background: white; border-radius: 8px; }
        #qr-code-img { width: 140px; height: 140px; }
        .day-header { background: var(--theme-header); color: white; padding: 18px; font-size: 1.4rem; margin: -25px -25px 20px -25px; border-top-left-radius: 12px; border-top-right-radius: 12px; }
        .day-summary {
            display: flex; flex-wrap: wrap; justify-content: space-between; align-items: center; gap: 15px;
            padding: 15px; background-color: #f8f9fa; border-radius: 8px; margin-bottom: 20px;
        }
        .summary-item { display: flex; align-items: center; gap: 10px; font-size: 0.9rem; }
        .summary-item-icon { font-size: 1.2rem; color: var(--theme-accent); }
        .spot-cards { display: grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap: 20px; }
        .spot-card {
            background-color: #f8f9fa; border-radius: 10px; overflow: hidden; border: 1px solid #e9ecef;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .spot-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.12);
        }
        .spot-img { width: 100%; height: 170px; object-fit: cover; background-color: #dee2e6; }
        .spot-info { padding: 15px; }
        .spot-name { font-size: 1.2rem; font-weight: bold; margin-bottom: 8px; color: var(--theme-accent); }
        .spot-meta { font-size: 0.9rem; color: var(--theme-text-secondary); }
        .custom-marker {
            color: white; border-radius: 50%; width: 26px; height: 26px; font-size: 13px;
            font-weight: bold; text-align: center; line-height: 26px; border: 2px solid white;
            box-shadow: 0 2px 5px rgba(0,0,0,0.4);
        }
        footer { text-align: center; padding: 30px 20px; color: #6c757d; font-size: 0.9rem; }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>G331å‘¼ä¼¦è´å°”7æ—¥å¤šå½©ç¯çº¿æ¸¸</h1>
            <p>ä»é¹¤åŸå‡ºå‘ï¼Œå¼€å¯ä¸€åœºæ£®æ—ã€è‰åŸä¸è¾¹å¢ƒçš„å¯»æ¢¦ä¹‹æ—…</p>
        </header>

        <section class="map-section">
            <h2 class="section-title">è·¯çº¿æ€»è§ˆåœ°å›¾</h2>
            <div class="map-layout-wrapper">
                <div class="map-sidebar">
                    <div class="action-group">
                        <a href="#" class="map-btn-primary" id="smart-map-btn"><span>ğŸ“</span> åœ¨Appä¸­æ‰“å¼€ä¸“å±åœ°å›¾</a>
                        <div class="action-label">æ™ºèƒ½åˆ¤æ–­è®¾å¤‡ï¼Œæ‰“å¼€é«˜å¾·åœ°å›¾</div>
                    </div>
                    <div class="qr-code-container">
                        <img id="qr-code-img" src="" alt="åœ°å›¾äºŒç»´ç ">
                        <div class="action-label" style="margin-top: 5px;">æ‰‹æœºæ‰«ç ï¼Œä½“éªŒæ›´ä½³</div>
                    </div>
                </div>
                <div class="map-container-wrapper">
                    <div class="map-container" id="container"></div>
                    <div class="map-legend" id="map-legend">
                        <h3 class="legend-title">æ¯æ—¥è·¯çº¿</h3>
                    </div>
                </div>
            </div>
        </section>

        <section class="itinerary-section" id="itinerary-section">
            <!-- Itinerary content will be generated by JS -->
        </section>

        <footer>
            <p>Â© 2025 Presentation Agent | å¤šå½©ä¸»é¢˜</p>
        </footer>
    </div>

    <script>
        window.onload = function () {
            const finalItinerary = {
                exclusiveMapUrl: "amapuri://workInAmap/createWithToken?polymericId=mcp_17cb1a9e198245c8bd549c4da0c56863&from=MCP",
                dailyRoutes: [
                    { day: 1, title: 'é½é½å“ˆå°” â†’ æŸ´æ²³', totalDuration: 'çº¦ 5å°æ—¶5åˆ†é’Ÿ', color: '#ff6b6b', points: [ { name: 'é½é½å“ˆå°”ç«™', coord: [123.995988, 47.340409], img: 'https://aos-comment.amap.com/B01C400C81/comment/174643715413_1746437170552_05316738.jpg', duration: 'èµ·ç‚¹' }, { name: 'æŸ´æ²³æœˆäº®å°é•‡', coord: [121.30699, 47.55696], img: 'http://store.is.autonavi.com/showpic/34710f1030238ce3bc64f3d3442d1ce0', duration: 'çº¦ 5å°æ—¶5åˆ†é’Ÿ' } ], hotel: { name: 'æŸ´æ²³æœˆäº®å¤©æ± é…’åº—', address: 'æŸ´æ²³é•‡æœˆäº®å¤©æ± æ™¯åŒº' } },
                    { day: 2, title: 'æŸ´æ²³ â†’ é˜¿å°”å±±', totalDuration: 'çº¦ 1å°æ—¶51åˆ†é’Ÿ', color: '#fca311', points: [ { name: 'æŸ´æ²³æœˆäº®å°é•‡', coord: [121.30699, 47.55696], img: 'http://store.is.autonavi.com/showpic/34710f1030238ce3bc64f3d3442d1ce0', duration: 'èµ·ç‚¹' }, { name: 'é˜¿å°”å±±å›½å®¶æ£®æ—å…¬å›­', coord: [120.421996, 47.284044], img: 'http://store.is.autonavi.com/showpic/e3cdeea5740d0f0ca054e3db2130ac2c', duration: 'çº¦ 1å°æ—¶51åˆ†é’Ÿ' } ], hotel: { name: 'é˜¿å°”å±±å¤©æ± åº¦å‡é…’åº—', address: 'å›½å®¶æ£®æ—å…¬å›­å†…' } },
                    { day: 3, title: 'é˜¿å°”å±± â†’ æ»¡æ´²é‡Œ', totalDuration: 'çº¦ 6å°æ—¶1åˆ†é’Ÿ', color: '#fdec51', points: [ { name: 'é˜¿å°”å±±', coord: [120.421996, 47.284044], img: 'http://store.is.autonavi.com/showpic/e3cdeea5740d0f0ca054e3db2130ac2c', duration: 'èµ·ç‚¹' }, { name: 'æ»¡æ´²é‡Œå¸‚', coord: [117.379134, 49.59862], img: 'https://aos-comment.amap.com/B01D60NCRC/comment/content_media_external_images_media_100001729_1733881666225_75052673.jpg', duration: 'çº¦ 6å°æ—¶1åˆ†é’Ÿ' } ], hotel: { name: 'æ»¡æ´²é‡Œå‹è°Šå®¾é¦†', address: 'ä¸€é“è¡—26å·' } },
                    { day: 4, title: 'æ»¡æ´²é‡Œ â†’ å®¤éŸ¦', totalDuration: 'çº¦ 6å°æ—¶49åˆ†é’Ÿ', color: '#4caf50', points: [ { name: 'æ»¡æ´²é‡Œ', coord: [117.379134, 49.59862], img: 'https://aos-comment.amap.com/B01D60NCRC/comment/content_media_external_images_media_100001729_1733881666225_75052673.jpg', duration: 'èµ·ç‚¹' }, { name: 'é¢å°”å¤çº³æ²³ä¹Œå…°å±±æ™¯åŒº', coord: [119.451961, 50.603812], img: 'http://store.is.autonavi.com/showpic/390aa13837a38455b8f34e6f445a1c2f', duration: 'çº¦ 4å°æ—¶56åˆ†é’Ÿ' }, { name: 'ä¸­å›½å®¤éŸ¦å£å²¸', coord: [119.895746, 51.334108], img: 'https://aos-comment.amap.com/B01D601KPF/comment/600a99f2f50e9b1a5cc88d758092454c_2048_2048_80.jpg', duration: 'çº¦ 1å°æ—¶53åˆ†é’Ÿ' } ], hotel: { name: 'å®¤éŸ¦ä¸´æ±Ÿè“è“åº„å›­', address: 'ä¸´æ±Ÿå±¯' } },
                    { day: 5, title: 'å®¤éŸ¦ â†’ æ ¹æ²³', totalDuration: 'çº¦ 3å°æ—¶11åˆ†é’Ÿ', color: '#2196f3', points: [ { name: 'ä¸­å›½å®¤éŸ¦å£å²¸', coord: [119.895746, 51.334108], img: 'https://aos-comment.amap.com/B01D601KPF/comment/600a99f2f50e9b1a5cc88d758092454c_2048_2048_80.jpg', duration: 'èµ·ç‚¹' }, { name: 'è«å°”é“å˜é•‡', coord: [120.785747, 51.255782], img: 'http://store.is.autonavi.com/showpic/66eb99165c30187301473bffb6ebe1ac', duration: 'çº¦ 1å°æ—¶24åˆ†é’Ÿ' }, { name: 'æ ¹æ²³å¸‚', coord: [121.520165, 50.779758], img: 'https://aos-comment.amap.com/B01D600WUL/comment/74AC9427_810D_4FC8_860C_491EA4D277DE_L0_001_2000_1334_1743161951215_90922048.jpg', duration: 'çº¦ 1å°æ—¶47åˆ†é’Ÿ' } ], hotel: { name: 'æ ¹æ²³å®¾é¦†', address: 'ä¸­å¤®è¡—æ ¹é˜³æ¡¥è¥¿' } },
                    { day: 6, title: 'æ ¹æ²³ â†’ æµ·æ‹‰å°”', totalDuration: 'çº¦ 3å°æ—¶55åˆ†é’Ÿ', color: '#3f51b5', points: [ { name: 'æ ¹æ²³å¸‚', coord: [121.520165, 50.779758], img: 'https://aos-comment.amap.com/B01D600WUL/comment/74AC9427_810D_4FC8_860C_491EA4D277DE_L0_001_2000_1334_1743161951215_90922048.jpg', duration: 'èµ·ç‚¹' }, { name: 'é¢å°”å¤çº³æ¹¿åœ°æ™¯åŒº', coord: [120.148865, 50.2492], img: 'http://store.is.autonavi.com/showpic/d570ed86f5043b3920a418fe7c4b057e', duration: 'çº¦ 1å°æ—¶52åˆ†é’Ÿ' }, { name: 'è«æ—¥æ ¼å‹’æ²³', coord: [119.779039, 49.511658], img: 'http://store.is.autonavi.com/showpic/f1cb1d4a155087f2541aca0414cb3b74', duration: 'çº¦ 1å°æ—¶25åˆ†é’Ÿ' }, { name: 'æµ·æ‹‰å°”åŒº', coord: [119.824542, 49.234715], img: 'https://aos-comment.amap.com/B01D600WR7/comment/content_media_external_images_media_1469_1736567111152_79798935.jpg', duration: 'çº¦ 38 åˆ†é’Ÿ' } ], hotel: { name: 'æµ·æ‹‰å°”è´å°”å¤§é…’åº—', address: 'èƒœåˆ©å¤§è¡—31å·' } },
                    { day: 7, title: 'æµ·æ‹‰å°” â†’ é½é½å“ˆå°”', totalDuration: 'çº¦ 4å°æ—¶47åˆ†é’Ÿ', color: '#9c27b0', points: [ { name: 'æµ·æ‹‰å°”åŒº', coord: [119.824542, 49.234715], img: 'https://aos-comment.amap.com/B01D600WR7/comment/content_media_external_images_media_1469_1736567111152_79798935.jpg', duration: 'èµ·ç‚¹' }, { name: 'é½é½å“ˆå°”ç«™', coord: [123.995988, 47.340409], img: 'https://aos-comment.amap.com/B01C400C81/comment/174643715413_1746437170552_05316738.jpg', duration: 'çº¦ 4å°æ—¶47åˆ†é’Ÿ' } ], hotel: null }
                ]
            };

            const itineraryContainer = document.getElementById('itinerary-section');
            finalItinerary.dailyRoutes.forEach(route => {
                const dayHtml = `
                <div class="day-container">
                    <div class="day-header">Day ${route.day}: ${route.title}</div>
                    <div class="day-summary">
                        <div class="summary-item">
                            <span class="summary-item-icon">ğŸ•’</span>
                            <span>å½“æ—¥æ€»è®¡ï¼š<strong>${route.totalDuration}</strong></span>
                        </div>
                        ${route.hotel ? `
                        <div class="summary-item">
                            <span class="summary-item-icon">ğŸ¨</span>
                            <span>æ¨èä½å®¿ï¼š<strong>${route.hotel.name}</strong></span>
                        </div>` : ''}
                    </div>
                    <div class="spot-cards">
                        ${route.points.map((p, index) => `
                        <div class="spot-card">
                            <img src="${p.img || 'https://placehold.co/600x400/dee2e6/6c757d?text=Image+Not+Found'}" alt="${p.name}" class="spot-img">
                            <div class="spot-info">
                                <h3 class="spot-name">${index + 1}. ${p.name}</h3>
                                <p class="spot-meta">è½¦ç¨‹ï¼š${p.duration}</p>
                            </div>
                        </div>`).join('')}
                    </div>
                </div>`;
                itineraryContainer.innerHTML += dayHtml;
            });

            const appUrl = finalItinerary.exclusiveMapUrl;
            const qrCodeImg = document.getElementById('qr-code-img');
            qrCodeImg.src = `https://api.qrserver.com/v1/create-qr-code/?size=140x140&data=${encodeURIComponent(appUrl)}`;

            var map = new AMap.Map('container', { zoom: 6, center: [122, 49], viewMode: '3D', pitch: 25 });
            const legendContainer = document.getElementById('map-legend');

            finalItinerary.dailyRoutes.forEach(route => {
                const path = route.points.map(p => p.coord);
                if (path.length > 1) {
                    new AMap.Polyline({ path: path, isOutline: true, outlineColor: '#000', borderWeight: 1, strokeColor: route.color, strokeWeight: 8, strokeStyle: 'solid', strokeOpacity: 0.8, zIndex: 50, map: map });
                }
                const legendItem = document.createElement('div');
                legendItem.className = 'legend-item';
                legendItem.innerHTML = `<div class="legend-color" style="background-color: ${route.color}"></div><span>Day ${route.day}</span>`;
                legendContainer.appendChild(legendItem);

                let pointCounter = 1;
                route.points.forEach(p => {
                    new AMap.Marker({
                        position: p.coord, title: p.name, map: map,
                        content: `<div class="custom-marker" style="background-color: ${route.color}">${pointCounter++}</div>`
                    });
                });
            });

            map.setFitView();

            document.getElementById('smart-map-btn').addEventListener('click', function(e) {
                e.preventDefault();
                window.location.href = appUrl;
            });
        }
    </script>
</body>
</html>